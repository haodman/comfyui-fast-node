# ComfyUI FastNodeæ’ä»¶

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ComfyUIæ’ä»¶ï¼Œæä¾›è‡ªå®šä¹‰å›¾ç‰‡å‘½åä¿å­˜ã€æ‰¹é‡å¤„ç†ã€ç±»å‹è½¬æ¢å’Œæ–‡ä»¶åŠ è½½åŠŸèƒ½ã€‚

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![ComfyUI](https://img.shields.io/badge/ComfyUI-Compatible-green.svg)](https://github.com/comfyanonymous/ComfyUI)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## ğŸš€ ä¸»è¦åŠŸèƒ½

### ğŸ“ å›¾ç‰‡ä¿å­˜ä¸å‘½å
- **è‡ªå®šä¹‰å‘½åæ ¼å¼**ï¼šæ”¯æŒ `00001_input.png`ã€`00001_output.png` ç­‰æ ¼å¼
- **å¤šç§å›¾ç‰‡ç±»å‹**ï¼šæ”¯æŒè¾“å…¥å›¾ç‰‡ã€è¾“å‡ºå›¾ç‰‡ã€Cannyè¾¹ç¼˜å›¾ã€æ·±åº¦å›¾ã€OpenPoseå›¾ç‰‡
- **æç¤ºè¯ä¿å­˜**ï¼šè‡ªåŠ¨ä¿å­˜æ­£é¢å’Œè´Ÿé¢æç¤ºè¯ä¸ºæ–‡æœ¬æ–‡ä»¶
- **å…ƒæ•°æ®è®°å½•**ï¼šç”ŸæˆJSONæ ¼å¼çš„å…ƒæ•°æ®æ–‡ä»¶ï¼Œè®°å½•ä¿å­˜ä¿¡æ¯
- **æ‰¹é‡å¤„ç†**ï¼šæ”¯æŒæ‰¹é‡å›¾ç‰‡çš„è‡ªåŠ¨å‘½åå’Œä¿å­˜

### ğŸ”„ ç±»å‹è½¬æ¢å·¥å…·
- **Seedè½¬æ–‡æœ¬**ï¼šä¸“é—¨å¤„ç†seedå€¼çš„æ ¼å¼åŒ–
- **æ–‡æœ¬æ‹¼æ¥**ï¼šå°†å¤šä¸ªæ–‡æœ¬ç‰‡æ®µæ‹¼æ¥æˆå®Œæ•´æ–‡æœ¬
- **ç®€å•ç±»å‹è½¬æ¢**ï¼šInt/Float/Textä¹‹é—´çš„å¿«é€Ÿè½¬æ¢

### ğŸ“ æ–‡ä»¶åŠ è½½å·¥å…·
- **æ‰¹é‡å›¾ç‰‡åŠ è½½**ï¼šä»æ–‡ä»¶å¤¹æ‰¹é‡åŠ è½½å›¾ç‰‡
- **å›¾ç‰‡åŒºé—´åŠ è½½**ï¼šæ”¯æŒæŒ‡å®šèµ·ç‚¹å’Œç»ˆç‚¹çš„å›¾ç‰‡åŠ è½½
- **æ‰¹é‡æ–‡æœ¬åŠ è½½**ï¼šä»æ–‡ä»¶å¤¹æ‰¹é‡åŠ è½½txt/json/csvæ–‡ä»¶

## ğŸ“¦ å®‰è£…æ–¹æ³•

### æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨å®‰è£…
1. ä¸‹è½½æ­¤ä»“åº“åˆ°æœ¬åœ°
2. å°†æ•´ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°ComfyUIçš„ `custom_nodes` ç›®å½•ä¸­
3. é‡å¯ComfyUI
4. åœ¨èŠ‚ç‚¹åˆ—è¡¨ä¸­æ‰¾åˆ° `ğŸ™FastNode` åˆ†ç±»ä¸‹çš„èŠ‚ç‚¹

### æ–¹æ³•äºŒï¼šä½¿ç”¨Gitå…‹éš†
```bash
cd ComfyUI/custom_nodes
git clone https://github.com/ä½ çš„ç”¨æˆ·å/comfyui-fast-node.git
```

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨å®‰è£…è„šæœ¬
```bash
# Windows
install.bat

# Linux/Mac
./install.sh
```

## ğŸ¯ èŠ‚ç‚¹è¯´æ˜

### ğŸ“ è‡ªå®šä¹‰å‘½åä¿å­˜å™¨ (CustomNamingSaver)
**åŠŸèƒ½**ï¼šä¿å­˜å›¾ç‰‡å¹¶ç”Ÿæˆè‡ªå®šä¹‰å‘½åçš„æ–‡ä»¶

**è¾“å…¥å‚æ•°ï¼š**
- `output_image` (å¿…éœ€): è¦ä¿å­˜çš„ä¸»å›¾ç‰‡
- `output_dir` (å¿…éœ€): è¾“å‡ºç›®å½•è·¯å¾„
- `start_index` (å¿…éœ€): èµ·å§‹ç´¢å¼•å·ï¼Œå¦‚ "1"

**å¯é€‰å‚æ•°ï¼š**
- `input_image`: è¾“å…¥å›¾ç‰‡
- `canny_image`: Cannyè¾¹ç¼˜æ£€æµ‹å›¾ç‰‡
- `depth_image`: æ·±åº¦å›¾
- `openpose_image`: OpenPoseå›¾ç‰‡
- `prompt_text`: æ­£é¢æç¤ºè¯
- `negative_prompt`: è´Ÿé¢æç¤ºè¯
- `save_input`: æ˜¯å¦ä¿å­˜è¾“å…¥å›¾ç‰‡ (é»˜è®¤: True)
- `save_canny`: æ˜¯å¦ä¿å­˜Cannyå›¾ç‰‡ (é»˜è®¤: False)
- `save_depth`: æ˜¯å¦ä¿å­˜æ·±åº¦å›¾ (é»˜è®¤: False)
- `save_openpose`: æ˜¯å¦ä¿å­˜OpenPoseå›¾ç‰‡ (é»˜è®¤: False)
- `save_prompt`: æ˜¯å¦ä¿å­˜æç¤ºè¯ (é»˜è®¤: True)
- `save_metadata`: æ˜¯å¦ä¿å­˜å…ƒæ•°æ® (é»˜è®¤: True)

**è¾“å‡ºï¼š**
- ä¿å­˜çš„å›¾ç‰‡
- ä¿å­˜æ–‡ä»¶åˆ—è¡¨çš„æ–‡æœ¬æ‘˜è¦

### ğŸ² Seedè½¬æ–‡æœ¬ (SeedToTextNode)
**åŠŸèƒ½**ï¼šå°†seedå€¼è½¬æ¢ä¸ºæ–‡æœ¬æ ¼å¼

**è¾“å…¥å‚æ•°ï¼š**
- `seed` (å¿…éœ€): seedå€¼
- `format` (å¿…éœ€): æ ¼å¼ç±»å‹ ["çº¯æ•°å­—", "æ— å‰ç¼€"]
- `padding` (å¿…éœ€): å¡«å……ä½æ•° (1-10)

**è¾“å‡ºï¼š**
- æ ¼å¼åŒ–åçš„seedæ–‡æœ¬

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
- seed=12345, format="çº¯æ•°å­—", padding=5 â†’ "12345"
- seed=12345, format="æ— å‰ç¼€", padding=5 â†’ "12345"

### ğŸ”— æ–‡æœ¬æ‹¼æ¥å™¨ (TextConcatenatorNode)
**åŠŸèƒ½**ï¼šå°†å¤šä¸ªæ–‡æœ¬ç‰‡æ®µæ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„æ–‡æœ¬

**è¾“å…¥å‚æ•°ï¼š**
- `separator` (å¿…éœ€): åˆ†éš”ç¬¦
- `text1` - `text5` (å¯é€‰): è¦æ‹¼æ¥çš„æ–‡æœ¬ç‰‡æ®µ

**è¾“å‡ºï¼š**
- æ‹¼æ¥åçš„å®Œæ•´æ–‡æœ¬

### ğŸ–¼ï¸ æ‰¹é‡å›¾ç‰‡åŠ è½½ (LoadingImageListNode)
**åŠŸèƒ½**ï¼šä»æ–‡ä»¶å¤¹æ‰¹é‡åŠ è½½å›¾ç‰‡

**è¾“å…¥å‚æ•°ï¼š**
- `folder_path` (å¿…éœ€): å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„
- `start` (å¯é€‰): èµ·å§‹ç´¢å¼• (é»˜è®¤: 0)
- `sort_by` (å¯é€‰): æ’åºæ–¹å¼ ["name", "mtime"] (é»˜è®¤: "name")
- `reverse` (å¯é€‰): æ˜¯å¦åå‘æ’åº (é»˜è®¤: False)
- `max_count` (å¯é€‰): æœ€å¤§åŠ è½½æ•°é‡ (é»˜è®¤: 0ï¼Œè¡¨ç¤ºå…¨éƒ¨)

### ğŸ“ å›¾ç‰‡åŒºé—´åŠ è½½ (ImageListRangeNode)
**åŠŸèƒ½**ï¼šåŠ è½½æŒ‡å®šåŒºé—´çš„å›¾ç‰‡

**è¾“å…¥å‚æ•°ï¼š**
- `folder_path` (å¿…éœ€): å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„
- `start` (å¿…éœ€): èµ·å§‹ç´¢å¼•
- `end` (å¿…éœ€): ç»“æŸç´¢å¼•
- `sort_by` (å¯é€‰): æ’åºæ–¹å¼ ["name", "mtime"] (é»˜è®¤: "name")
- `reverse` (å¯é€‰): æ˜¯å¦åå‘æ’åº (é»˜è®¤: False)

### ğŸ“„ æ‰¹é‡æ–‡æœ¬åŠ è½½ (LoadingTextListNode)
**åŠŸèƒ½**ï¼šä»æ–‡ä»¶å¤¹æ‰¹é‡åŠ è½½æ–‡æœ¬æ–‡ä»¶

**è¾“å…¥å‚æ•°ï¼š**
- `folder_path` (å¿…éœ€): æ–‡æœ¬æ–‡ä»¶å¤¹è·¯å¾„
- `start` (å¯é€‰): èµ·å§‹ç´¢å¼• (é»˜è®¤: 0)
- `sort_by` (å¯é€‰): æ’åºæ–¹å¼ ["name", "mtime"] (é»˜è®¤: "name")
- `reverse` (å¯é€‰): æ˜¯å¦åå‘æ’åº (é»˜è®¤: False)
- `max_count` (å¯é€‰): æœ€å¤§åŠ è½½æ•°é‡ (é»˜è®¤: 0ï¼Œè¡¨ç¤ºå…¨éƒ¨)

### ğŸ”¢ ç®€å•ç±»å‹è½¬æ¢èŠ‚ç‚¹
- **Int To Float (Simple)**: æ•´æ•°è½¬æµ®ç‚¹æ•°
- **Float To Int (Simple)**: æµ®ç‚¹æ•°è½¬æ•´æ•°
- **Int To Text (Simple)**: æ•´æ•°è½¬æ–‡æœ¬
- **Float To Text (Simple)**: æµ®ç‚¹æ•°è½¬æ–‡æœ¬ï¼ˆæ”¯æŒå°æ•°ä½æ•°è®¾ç½®ï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
comfyui-fast-node/
â”œâ”€â”€ __init__.py                 # æ’ä»¶å…¥å£æ–‡ä»¶
â”œâ”€â”€ custom_naming_saver.py      # ä¸»è¦èŠ‚ç‚¹å®ç°
â”œâ”€â”€ web/                       # Webç•Œé¢æ–‡ä»¶
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ custom_naming.js   # JavaScriptæ”¯æŒ
â”œâ”€â”€ workflows/                 # å·¥ä½œæµç¤ºä¾‹
â”‚   â”œâ”€â”€ example_workflow.json  # ç¤ºä¾‹å·¥ä½œæµ
â”‚   â””â”€â”€ dev_workflow.json      # å¼€å‘å·¥ä½œæµ
â”œâ”€â”€ scripts/                   # è¾…åŠ©è„šæœ¬
â”‚   â”œâ”€â”€ dev_setup.py          # å¼€å‘ç¯å¢ƒè®¾ç½®è„šæœ¬
â”‚   â””â”€â”€ hot_reload_manager.py # çƒ­æ›´æ–°ç®¡ç†å™¨
â”œâ”€â”€ requirements.txt           # ä¾èµ–åŒ…
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ USAGE.md                   # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ MAINTENANCE.md             # ç»´æŠ¤æŒ‡å—
â”œâ”€â”€ install.bat               # Windowså®‰è£…è„šæœ¬
â”œâ”€â”€ install.sh                # Linux/Macå®‰è£…è„šæœ¬
â””â”€â”€ .gitignore                # Gitå¿½ç•¥æ–‡ä»¶
```

## ğŸ¨ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬å›¾ç‰‡ä¿å­˜
```
KSampler â†’ CustomNamingSaver
```

### ä½¿ç”¨Seedå€¼å‘½å
```
KSampler â†’ SeedToTextNode â†’ TextConcatenatorNode â†’ CustomNamingSaver
```

### æ‰¹é‡å›¾ç‰‡å¤„ç†
```
LoadingImageListNode â†’ å¤„ç†èŠ‚ç‚¹ â†’ CustomNamingSaver
```

æ›´å¤šä½¿ç”¨ç¤ºä¾‹è¯·æŸ¥çœ‹ [USAGE.md](USAGE.md)

## ğŸ“‹ ä¾èµ–è¦æ±‚

- Python 3.8+
- ComfyUI
- Pillow >= 9.0.0
- torch >= 1.9.0
- numpy >= 1.21.0

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- æ„Ÿè°¢ComfyUIç¤¾åŒºçš„æ”¯æŒå’Œè´¡çŒ®
- æ„Ÿè°¢æ‰€æœ‰ä½¿ç”¨å’Œåé¦ˆçš„ç”¨æˆ·

## ğŸ“ è”ç³»æ–¹å¼

- GitHub Issues: [æäº¤é—®é¢˜](https://github.com/ä½ çš„ç”¨æˆ·å/comfyui-fast-node/issues)
- è®¨è®ºåŒº: [GitHub Discussions](https://github.com/ä½ çš„ç”¨æˆ·å/comfyui-fast-node/discussions)

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ï¼ 