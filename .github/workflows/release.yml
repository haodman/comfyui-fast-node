name: Release

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Create Release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
          body: |
            ## ğŸš€ æ–°ç‰ˆæœ¬å‘å¸ƒ
            
            ### ä¸»è¦æ›´æ–°
            - è‡ªå®šä¹‰å›¾ç‰‡å‘½åä¿å­˜åŠŸèƒ½
            - æ‰¹é‡å›¾ç‰‡å’Œæ–‡æœ¬åŠ è½½å·¥å…·
            - ç±»å‹è½¬æ¢å·¥å…·
            - æ–‡æœ¬æ‹¼æ¥åŠŸèƒ½
            
            ### å®‰è£…æ–¹æ³•
            1. ä¸‹è½½å¹¶è§£å‹åˆ°ComfyUIçš„custom_nodesç›®å½•
            2. é‡å¯ComfyUI
            3. åœ¨èŠ‚ç‚¹åˆ—è¡¨ä¸­æ‰¾åˆ°ğŸ™FastNodeåˆ†ç±»
            
            ### è¯¦ç»†æ–‡æ¡£
            è¯·æŸ¥çœ‹README.mdäº†è§£è¯¦ç»†ä½¿ç”¨æ–¹æ³•
          draft: false
          prerelease: false

      - name: Upload Release Assets
        uses: actions/upload-release-asset@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          upload_url: ${{ steps.create_release.outputs.upload_url }}
          asset_path: ./comfyui-fast-node.zip
          asset_name: comfyui-fast-node.zip
          asset_content_type: application/zip 